'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = checkPost;

var _restleError = require('restle-error');

/**
 * Checks if the incoming request data is not conflicting.
 *
 * @private
 * @param {Object} req
 * @param {Object} res
 * @return {Boolean}
 */

function checkPost(req, res) {
  if (!(req.body && req.body.data && req.body.data.type)) {
    var badRequestError = new _restleError.BadRequestError({
      detail: 'A primary data object with a matching type key is required when creating a resource.'
    });

    return {
      status: badRequestError.status,
      json: badRequestError.serialize()
    };
  }

  if (req.params.id !== req.body.data.id) {
    var conflictError = new _restleError.ConflictError({
      first: req.params.id,
      second: req.body.data.id
    });

    return {
      status: conflictError.status,
      json: conflictError.serialize()
    };
  }
}

module.exports = exports['default'];